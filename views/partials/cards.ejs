<hr/> 
<h2>Buy an Item</h2>

<div class="row row-cols-3 g-4">

    <!-- Variable used to turn on or off cards. -->
    <% const usersItems = locals.usersItems %>
    <% let setOpacity %>
    <% let setInteractive %>

    <!-- Check if the user can purchase the item, if not disable the card. -->
    <% usersItems.forEach(user => { %>
    <% user.items.forEach(item => { %>    
    <% if (item.price > locals.user.balance) {%>
    <% setOpacity = "opacity-25" %>
    <% setInteractive = "disabled" %>
    <% } else { %>
    <% setOpacity = "opacity-100" %>
    <% setInteractive = "enabled" %>
    <% } %>
         
    <div class= <%=setOpacity%>>
        <div class="h-100" style="margin: 8px; float:left; width:fit-content">
            <input <%= setInteractive %> class="form-check-input" type="radio" name="id" value="<%= item.id%>" id="<%= item.id%>">
        </div>
        
        <label for="<%= item.id%>" class="card h-100 "style="width: fit-content;">
            <div class="card-body">
                <h3 class="card-title"><%= item.name %></h3>
                <h4 class="card-text">Item ID : <%= item.id %></h4>
                <h4 class="card-text">Seller : <%= user.user_name %></h4>
            </div>
            <div class="card-footer text-muted"><h4>Price: $<%= item.price %></h4></div>
        </label>

    </div>
            
    <% }) %>
    <% }) %>
</div>